# DiT Flow Matching Training Configuration
# Complete configuration for training DiT with flow matching
# Based on MinCatFlow training scheme

output_dir: data/dit_flow_matching

# WandB configuration
wandb:
  enabled: false
  project: molgen-bench
  entity: null
  name: dit_flow_matching
  tags: [dit, flow_matching, molecular_generation]

# Data
data:
  dataset: qm9
  data_dir: ./data/downloaded
  batch_size: 32
  num_workers: 4
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1

# DiT Architecture (small config)
architecture:
  type: dit
  hidden_dim: 256
  num_layers: 6
  num_heads: 4
  mlp_ratio: 4.0
  num_atom_types: 100
  max_atoms: 256
  dropout: 0.1
  use_checkpoint: false

# Flow Matching Generative Model
generative:
  type: flow_matching
  time_steps: 1000
  sigma_min: 0.001
  sigma_max: 1.0
  noise_schedule: linear
  loss_type: mse
  num_sampling_steps: 50

# Training - MinCatFlow settings
training:
  epochs: 1000
  learning_rate: 1e-4
  weight_decay: 0.01
  warmup_steps: 1000
  gradient_clip: 10.0
  ema_decay: 0.999
  track_scaling: true
  log_interval: 100
  eval_interval: 1000
  checkpoint_interval: 5000

# Optimizer - AdamW with MinCatFlow settings
optimizer:
  type: adamw
  betas: [0.9, 0.999]
  eps: 1e-8

# Scheduler - ReduceLROnPlateau
scheduler:
  type: reduce_on_plateau
  mode: min
  factor: 0.5
  patience: 10
  min_lr: 1e-6

# Evaluation
evaluation:
  num_samples: 10000
  batch_size: 256
  num_steps: 50
  metrics:
    - validity
    - uniqueness
    - novelty
    - wasserstein
    - fcd
    - property_stats

# Logging
logging:
  output_dir: ./outputs
  experiment_name: dit_flow_matching
  log_wandb: false
  wandb_project: molgen-bench

# Hardware
device: cuda
mixed_precision: true
compile: false
deterministic: true
seed: 42
