# Default configuration for molecular generative model training
# Based on MinCatFlow training scheme

# Output directory for results (required by template conventions)
output_dir: data/default_experiment

# WandB configuration
wandb:
  enabled: false  # Set to true to enable WandB logging
  project: molgen-bench  # WandB project name
  entity: null  # WandB entity/team name (null uses default)
  name: null  # Run name (null uses auto-generated name)
  tags: [molecular_generation, flow_matching, dit]  # Tags for this run

# Data
data:
  dataset: qm9  # qm9 or mp20
  data_dir: ./data/downloaded
  batch_size: 32  # MinCatFlow uses 32
  num_workers: 4
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1

# Model
architecture:
  type: dit  # DiT transformer (removed gnn, pairformer)
  hidden_dim: 256
  num_layers: 6
  num_heads: 4
  mlp_ratio: 4.0
  dropout: 0.1
  max_atoms: 256
  use_checkpoint: false  # Gradient checkpointing for memory

generative:
  type: flow_matching
  time_steps: 1000
  sigma_min: 0.001
  sigma_max: 1.0
  noise_schedule: linear  # linear interpolation for flow matching
  loss_type: mse
  num_sampling_steps: 50  # MinCatFlow uses 50

# Training - MinCatFlow settings
training:
  epochs: 1000  # MinCatFlow uses 1000
  learning_rate: 1e-4
  weight_decay: 0.01  # MinCatFlow uses 0.01
  warmup_steps: 1000
  gradient_clip: 10.0  # MinCatFlow uses 10.0
  ema_decay: 0.999

  # Logging and evaluation
  track_scaling: true
  log_interval: 100
  eval_interval: 1000
  checkpoint_interval: 5000

# Optimization - MinCatFlow settings
optimizer:
  type: adamw
  betas: [0.9, 0.999]
  eps: 1e-8

# Scheduler - MinCatFlow uses ReduceLROnPlateau
scheduler:
  type: reduce_on_plateau
  mode: min
  factor: 0.5
  patience: 10
  min_lr: 1e-6

# Evaluation
evaluation:
  num_samples: 10000
  batch_size: 256
  num_steps: 50  # Sampling steps
  metrics:
    - validity
    - uniqueness
    - novelty
    - wasserstein
    - fcd
    - property_stats

# Logging
logging:
  output_dir: ./outputs
  experiment_name: default
  log_wandb: false
  wandb_project: molgen-bench

# Hardware
device: cuda
mixed_precision: true
compile: false  # torch.compile for PyTorch 2.0+
deterministic: true
seed: 42
