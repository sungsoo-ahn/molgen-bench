# Quick test configuration for validating training loop
# GNN + Flow Matching with minimal settings

# Output directory for results
output_dir: data/test_quick

# WandB configuration
wandb:
  enabled: false  # Set to true to enable WandB logging
  project: molgen-bench  # WandB project name
  entity: null  # WandB entity/team name (null uses default)
  name: null  # Run name (null uses auto-generated name)
  tags: [quick_test, flow_matching]  # Tags for this run

# Data
data:
  dataset: qm9
  data_dir: ./data/downloaded
  batch_size: 32  # Smaller for faster iteration
  num_workers: 2
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1

# Model - smaller for quick testing
architecture:
  type: gnn
  hidden_dim: 64  # Reduced from 256
  num_layers: 2   # Reduced from 6
  dropout: 0.1
  activation: relu

generative:
  type: flow_matching
  time_steps: 100  # Reduced from 1000
  sigma_min: 0.001
  sigma_max: 1.0
  noise_schedule: cosine

# Training - minimal for quick test
training:
  epochs: 5  # Very few epochs for quick test
  learning_rate: 0.0001  # 1e-4 in decimal notation
  weight_decay: 0.00001  # 1e-5 in decimal notation
  warmup_steps: 10  # Reduced from 1000
  gradient_clip: 1.0
  ema_decay: 0.999

  # Scaling law experiments
  track_scaling: false  # Disabled for quick test
  log_interval: 10  # More frequent logging for visibility
  eval_interval: 50
  checkpoint_interval: 1000

# Optimization
optimizer:
  type: adamw
  betas: [0.9, 0.999]
  eps: 0.00000001  # 1e-8 in decimal notation

scheduler:
  type: cosine
  min_lr: 0.000001  # 1e-6 in decimal notation

# Evaluation - minimal for quick test
evaluation:
  num_samples: 100  # Reduced from 10000
  batch_size: 32
  metrics:
    - validity
    - uniqueness

# Logging
logging:
  output_dir: ./outputs
  experiment_name: test_quick
  log_wandb: false
  wandb_project: molgen-bench

# Hardware
device: cuda
mixed_precision: false  # Disabled for testing - GNN has mixed precision issues
compile: false
